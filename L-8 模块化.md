# 模块化
> 在ES6之前，JavaScript中并没有模块化的概念。社区中出现了CommonJS、AMD和CMD等JavaScript模块化的规范，而ES6自带了模块化（目前各个浏览器对ES6的支持程度不同，通常使用babel等构建工具将ES6转化为ES5的语法实现兼容）。
## 基本语法
> 在ES6中，模块代码需要导出（暴露）提供给外界访问的变量（或常量）。不同的导出方式，在引入此模块的JS代码中，有不同的接收方式。在使用**import**引入模块时，需要给**script标签**设置**type="module"**的属性，且无需使用外链的形式引入js模块文件。
* **只导出一个变量（或常量），可以使用`default`关键字：**
```js
// module-code（模块文件代码）:
export default 100;

// main-code（主文件代码）:
import a from './test.js';
console.log(a);             // 100
```
* **变量名/常量名 导出：**
```js
// module-code:
// export const num = 100;      // 导出常量
export let num = 100;           // 导出变量

// main-code:
import a from './test.js';
console.log(a);                 // SyntaxError
```
上面的代码执行结果如下：

![avatar](./images/module/1.png)
> 上面错误指出模块中未提供名为'default'的导出，在导出固定名称的变量（或常量）时，在接收时需要使用{}包裹，否则视为接收模块中使用default导出的默认数据。如下：
```js
// module-code:
// export const num = 100;      // 导出常量
export let num = 100;           // 导出变量

// main-code:
import {a} from './test.js';
console.log(a);                 // SyntaxError
```

此时虽然依然会报错，但不是未提供名为'default'的导出。如下：
![avatar](./images/module/2.png)
> 上面错误指出模块中未提供名为'a'的导出，在导出具体变量（或常量）时，接收时需要与导出的变量名（或常量名）一致。如下：
```js
// module-code:
// export const num = 100;      // 导出常量
export let num = 100;           // 导出变量

// main-code:
import {num} from './test.js';
console.log(num);               // 100
```
![avatar](./images/module/3.png)
* **导出/接收多个**
> 当导出多个指定名称的数据时，接收可以使用解构的方式接收
```js
// module-code:
export let a = 1;
export let b = 2;
export let c = 3;

// main-code:
import {a, b, c} from './test.js';
console.log(a, b, c);               // 1 2 3
```
* **default和多个导出/接收**
> 当使用default导出默认数据，并导出其他指定名称的数据时。例如以下代码，zero接收default数据，{}中的变量接收其他指定名称的数据：
```js
// module-code:
export default 0;
export let a = 1;
export let b = 2;
export let c = 3;

// main-code:
import zero,{a, b, c} from './test.js';
console.log(zero, a, b, c);         // 0 1 2 3
```
* **使用对象导出多个数据**
> 实际上，在导出指定名称的数据时，会将所有要导出的数据整合成一个对象，所以接收时可以使用对象的解构方式进行接收。
```js
// module-code:
let a = 1;
let b = 2;
let c = 3;
export {
    a,
    b,
    c
};

// main-code:
import {a, b, c} from './test.js';
console.log(a, b, c);               // 1 2 3
```
* **使用别名导出数据**
```js
// module-code:
let a = 0;
export {a as number};

// main-code:
import {number} from './test.js';
console.log(number);                // 0
```
* 使用*（通配符）重新导出其他模块的接口
> 在模块中，可以引入其他模块。而且在当前模块中，可以使用*（通配符）重新导出引入模块的所有数据。
* **使用`*（通配符）`接收所有导出的数据**
> 可以使用`*（通配符）`接收模块中导出的所有数据，但是必须将接收到的数据赋给一个别名：
```js
// module-code:
export default 0;
export let a = 1;
export let b = 2;
export let c = 3;

// main-code:
import * as obj from './test.js';
console.log(obj);
```
![avatar](./images/module/4.png)